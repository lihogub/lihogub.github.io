{"version":3,"sources":["App.jsx","reportWebVitals.js","index.js"],"names":["DB","common","commonList","mathobes","fundam","applied","inform","addToCommon","user","direction","hasOwnProperty","id","score","shown","agree","Math","max","getData","url","callback","axios","get","makeUrl","then","r","html","matchAll","reduce","prev","curr","delta","index","row","slice","map","m","parseInt","p","c","match","console","log","Infinity","process","data","stateToString","state","App","useState","useLol","selected","setSelected","useEffect","forEach","u","Object","entries","Set","sort","a","b","reverse","tStyle","borderCollapse","border","selStyle","background","onClick","directionId","undefined","sortBy","className","style","children","filter","idx","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.34b087f0.chunk.js","sourcesContent":["import './App.css';\nimport {useEffect, useRef, useState} from \"react\";\nimport axios from \"axios\";\n\nconst MATHOBES = \"http://ftp.kubsu.ru/ranged/02.03.03_792_ofo_b.html\"\nconst INFORM = \"http://ftp.kubsu.ru/ranged/09.03.03_793_ofo_b.html\"\nconst FUNDAM = \"http://ftp.kubsu.ru/ranged/02.03.02_788_ofo_b.html\"\nconst APPLIED = \"http://ftp.kubsu.ru/ranged/01.03.02_790_ofo_b.html\"\n\nconst DB = {\n    common: {},\n    commonList: [],\n    mathobes: [],\n    fundam: [],\n    applied: [],\n    inform: []\n}\n\nconst merge = () => {\n    DB.mathobes.forEach(u => addToCommon(u, \"mathobes\"))\n    DB.fundam.forEach(u => addToCommon(u, \"fundam\"))\n    DB.applied.forEach(u => addToCommon(u, \"applied\"))\n    DB.inform.forEach(u => addToCommon(u, \"inform\"))\n\n    Object.entries(DB.common).forEach(\n        u => {\n            DB.commonList = [...DB.commonList, u[1]]\n        }\n    )\n\n\n    DB.commonList = [...new Set(DB.commonList)]\n    DB.commonList.sort((a,b) => a.score-b.score ).reverse()\n}\n\nconst addToCommon = (user, direction) => {\n    if (!DB.common.hasOwnProperty(user.id)) {\n        DB.common[user.id] = {\n            id: user.id,\n            score: user.score,\n            shown: true\n        }\n    }\n    DB.common[user.id][direction] = user.agree\n    DB.common[user.id].score = Math.max(DB.common[user.id].score, user.score)\n}\n\nconst process = (html, callback, direction) => {\n    const regexp = /...-...-... ../g;\n\n    const M = [...html.matchAll(regexp)];\n\n    M.reduce((prev, curr) => {\n\n        let delta = curr.index - prev.index\n        let row = html.slice(prev.index+14, prev.index + delta - 200)\n\n        let id = html.slice(prev.index+0, prev.index + 14)\n        let score = [...row.matchAll(/(\\d)+<\\/div>/g)].map(m => {\n            return parseInt([...m[0].matchAll(/(\\d)+/g)][0][0])\n        }).reduce((p, c)=> Math.max(p, c), 0)\n\n        let agree = row.match(/(Есть)|(Нет)/g)[0]\n        console.log(id, score, agree)\n\n        DB[direction] = [...DB[direction], {\n            id: id,\n            score: (score < 20) ? Infinity : score,\n            agree: (agree === \"Есть\")\n        }]\n\n        callback(direction)\n        return curr\n    })\n\n    callback(\"OK\")\n}\n\nconst makeUrl = (url) => {\n    return `https://api.codetabs.com/v1/proxy/?quest=${url}`\n}\n\nconst getData = (url, direction, callback) => {\n    axios.get(makeUrl(url))\n        .then(r => {\n            process(r.data, callback, direction)\n        })\n}\n\nconst stateToString = (state) => {\n    if (state)\n        return \"+\"\n    else if (state === false)\n        return \"-\"\n    else\n        return \"\"\n}\n\nconst sortBy = (direction, callback) => {\n    if (direction === null) {\n        DB.commonList.forEach(u=>{\n            u.shown = true\n        })\n    } else {\n        DB.commonList.forEach(u => {\n            u.shown = u[direction] !== undefined;\n        })\n    }\n    callback(direction)\n}\n\nfunction App() {\n\n    const [lol, useLol] = useState(\"\")\n\n    const [selected, setSelected] = useState(1)\n\n    useEffect(()=>{\n        getData(MATHOBES, \"mathobes\", useLol)\n        getData(APPLIED, \"applied\", useLol)\n        getData(INFORM, \"inform\", useLol)\n        getData(FUNDAM, \"fundam\", useLol)\n    }, [])\n\n    merge()\n    console.log(DB)\n\n    const tStyle = {\n        borderCollapse: \"collapse\",\n        border: \"1px solid\",\n    }\n\n    const selStyle = {\n        borderCollapse: \"collapse\",\n        border: \"1px solid\",\n        background: \"lightgray\",\n    }\n\n    const onClick = (direction, directionId) => {\n        sortBy(direction, useLol)\n        setSelected(directionId)\n    }\n\n  return (\n    <div className=\"App\">\n        <table style={tStyle}>\n            <td style={tStyle}>№</td>\n            <td style={tStyle}>СНИЛС</td>\n            <td style={(selected === 1) ? selStyle : tStyle}>\n                <button children={\"БАЛЛЫ\"} onClick={()=>onClick(null, 1)} />\n            </td>\n            <td style={(selected === 2) ? selStyle : tStyle}>\n                <button children={\"МОАИС\"} onClick={()=>onClick(\"mathobes\", 2)}/>\n            </td>\n            <td style={(selected === 3) ? selStyle : tStyle}>\n                <button children={\"ФИИТ\"} onClick={()=>onClick(\"fundam\", 3)}/>\n            </td>\n            <td style={(selected === 4) ? selStyle : tStyle}>\n                <button children={\"ПМИ\"} onClick={()=>onClick(\"applied\", 4)}/>\n            </td>\n            <td style={(selected === 5) ? selStyle : tStyle}>\n                <button children={\"ПИ\"} onClick={()=>onClick(\"inform\", 5)}/>\n            </td>\n\n            {\n                DB.commonList\n                    .filter(u => u.shown)\n                    .map(\n                    (u, idx) => (\n                        <tr style={tStyle}>\n                            <td style={tStyle}>{idx+1}</td>\n                            <td style={tStyle}>{u.id}</td>\n                            <td style={(selected === 1) ? selStyle : tStyle}>{u.score}</td>\n                            <td style={(selected === 2) ? selStyle : tStyle}>{stateToString(u.mathobes)}</td>\n                            <td style={(selected === 3) ? selStyle : tStyle}>{stateToString(u.fundam)}</td>\n                            <td style={(selected === 4) ? selStyle : tStyle}>{stateToString(u.applied)}</td>\n                            <td style={(selected === 5) ? selStyle : tStyle}>{stateToString(u.inform)}</td>\n                        </tr>\n                    )\n                )\n            }\n\n        </table>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}